<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="style.css" />
  <meta charset="ISO-8859-1" />
  <title>Form Data</title>
</head>

<body>
  <div id="myForm">
    <table>
      <tr>
        <td>
          Name of the Customer:
          <input id="username" type="text" name="username" />
        </td>
      </tr>
      <tr>
        <td>
          Designation:
          <input id="designation" type="text" name="designation" />
        </td>
      </tr>
      <tr>
        <td>Email: <input id="email" type="text" name="email" /></td>
      </tr>
      <tr>
        <td>MobileNo: <input id="mobile" type="text" name="mobile" /></td>
      </tr>
      <tr>
        <td>Type the whole bookingappointment URL</td>
      </tr>
      <tr>
        <td>
          AppointmentLink
          <input id="appointment" type="text" name="appointment" />
        </td>
      </tr>
      <tr>
        <td>
          Image:<input type="file" id="image_input" accept="image/png, image/jpeg" />
        </td>
      </tr>
      <tr>
        <td>
          Choose Template
          <input type="radio" id="templateselector" name="templateselector" value="Template1" checked />
          <label for="Template1">Template1</label>
          <input type="radio" id="templateselector" name="templateselector" value="Template2" />
          <label for="Template2">Template2</label>
        </td>
      </tr>
    </table>
    <button type="button" onclick="validationform() ">Preview</button>
  </div>
  <div id="Template1" class="template1" style="position: relative; left: 450px; top: -140px">
    <table class="template1table1" style="
          min-width: 313px;
          margin: 0px;
          box-sizing: border-box;
          border-collapse: collapse;
          background-color: #ffffff;
        ">
      <tr>
        <td class="table1image1" style="
              width: 125px;
              height: 156px;
              vertical-align: top;
              text-align: right;
            ">
          <img src="#" id="image" class="table1image1set" width="125px" height="156px" />
        </td>
        <td id="text" class="table1username" style="padding: 4px 0 0 24px; vertical-align: top">
          <p id="usernameResult" class="table1usernameResult" style="
                font-family: Arial, Helvetica, sans-serif;
                font-weight: 600;
                color: #006ec8;
                font-size: 20px;
                margin: 0 0 4px;
                line-height: 24px;
                letter-spacing: 0.8px;
              ">
            <b style="font-weight: 600"></b>
          </p>
          <p id="designationResult" class="table1designationResult" style="
                font-family: Arial, Helvetica, sans-serif;
                color: rgba(48, 48, 48, 0.6);
                font-size: 16px;
                margin: 0 0 10px;
                font-weight: 400;
                line-height: 18px;
              "></p>
          <hr id="space" class="table1space" id="space" width="44px" style="
                width: 44px;
                border: 0;
                border-top: 1px solid #83838333;
                margin: 0 0 20px;
                max-width: 44px;
              " />
          <p class="table1emailResult" style="
                margin: 0 0 10px;
                font-family: Arial, Helvetica, sans-serif;
                color: #303030;
                font-size: 16px;
                font-weight: 400;
                line-height: 18px;
              ">
            <a href="#" id="emailLink" class="table1emailLink" target="_self" style="
                  font-family: Arial, Helvetica, sans-serif;
                  color: #303030;
                  font-size: 16px;
                  font-weight: 400;
                  line-height: 18px;
                  text-decoration: none;
                  cursor: pointer;
                ">
              <span id="emailResult"></span></a>
          </p>
          <p class="table1mobileResult" style="
                margin: 0 0 10px;
                font-family: Arial, Helvetica, sans-serif;
                color: #303030;
                font-size: 16px;
                font-weight: 400;
                line-height: 18px;
              ">
            <a href="#" id="mobileLink" class="table1mobileLink" style="
                  font-family: Arial, Helvetica, sans-serif;
                  color: #303030;
                  font-size: 16px;
                  font-weight: 400;
                  line-height: 18px;
                  text-decoration: none;
                  cursor: pointer;
                ">
              <span id="mobileResult"></span>
            </a>
          </p>
          <p id="bookingappointment" class="table1bookappointment" style="
                margin: 0;
                font-family: Arial, Helvetica, sans-serif;
                color: #303030;
                font-size: 16px;
                font-weight: 400;
                line-height: 18px;
              ">
            <a href="#" class="table1bookappointmentlink" id="bookappointmentlink" target="_blank" style="
                  font-family: Arial, Helvetica, sans-serif;
                  color: #303030;
                  font-size: 16px;
                  font-weight: 400;
                  line-height: 18px;
                  text-decoration: none;
                  cursor: pointer;
                ">Book appointment</a>
          </p>
        </td>
      </tr>
    </table>
    <br />
  </div>

  <div id="Template2" class="template2" style="position: relative; left: 450px; top: -140px">
    <table class="template2table1" style="
          min-width: 575px;
          margin: 0px;
          box-sizing: border-box;
          background: #ffffff;
          width: 575px;
          border-collapse: collapse;
        ">
      <tbody>
        <tr>
          <td class="template2image" style="
                padding: 0px;
                width: 117px;
                vertical-align: top;
                text-align: center;
                font-size: 0;
                background-color: #ffffff;
              ">
            <img src="#" class="template2setimage" id="image" style="
                  width: 117px;
                  height: 130px;
                  max-width: 117;
                  max-height: 130px;
                  font-size: 0;
                  color: #ddd;
                " alt="user pic" />
          </td>
          <td class="template2icon" style="
                padding: 0px 0 0 16px;
                vertical-align: middle;
                background: #ffffff;
              ">
            <p class="template2iconpara" style="
                  font-family: Arial, sans-serif;
                  color: #2181bc;
                  font-size: 0;
                  margin: 0;
                  padding: 2px 0 0;
                  font-weight: 400;
                ">
              <a href="https://www.answerforce.com/" class="template2iconlink" target="_blank" style="
                    border-radius: 100%;
                    box-sizing: border-box;
                    margin: 0;
                    display: inline-block;
                    font-size: 0;
                  ">
                <img src="https://cdn.contactcenterworld.com/images/company/answerforce-1200px-logo.png"
                  alt="AnswerForceLogo" class="template2logo" style="
                      width: 111px;
                      height: 25px;
                      max-height: 100px;
                      max-width: 111px;
                      display: block;
                      font-size: 0;
                      color: #ddd;
                    " />
              </a>
            </p>
            <p id="usernameResult" class="templateusernameResult" style="
                  font-family: Arial, sans-serif;
                  margin: 9px 0 4px;
                  font-size: 18px;
                  line-height: 21px;
                  font-weight: bold;
                  color: #33393d;
                "></p>
            <p id="designationResult" class="template2designationResult" style="
                  font-family: Arial, sans-serif;
                  margin: 0 0 12px;
                  font-size: 11px;
                  line-height: 13px;
                  color: #999c9e;
                "></p>
            <table class="template2table2" style="
                  width: 100%;
                  background-color: #3270d8;
                  border-radius: 6px 6px 6px 0;
                  border-collapse: collapse;
                ">
              <tbody>
                <tr>
                  <td class="template2mobile" style="
                        padding: 12px 12px 12px 12px;
                        text-align: left;
                        vertical-align: middle;
                      ">
                    <p class="template2mobilepara" style="
                          font-family: Arial, sans-serif;
                          color: #ffffff;
                          text-decoration: initial;
                          font-size: 0px;
                          margin: 0 0 6px;
                        ">
                      <a id="mobileLink" href="#" target="_self" class="template2mobilelink" style="
                            text-decoration: initial;
                            color: #ffffff;
                            font-size: 0;
                            display: inline-block;
                          ">
                        <span id="mobileResult" class="template2mobileResult" style="
                              text-decoration: initial;
                              color: #ffffff;
                              font-size: 11px;
                              line-height: 12px;
                            "></span>
                      </a>
                    </p>
                    <p class="template2email" style="
                          font-family: Arial, sans-serif;
                          color: #ffffff;
                          font-size: 0px;
                          margin: 0;
                        ">
                      <a id="emailLink" href="#" target="_self" class="template2emaillink" style="
                            text-decoration: initial;
                            color: #ffffff;
                            font-size: 0;
                          ">
                        <span id="emailResult" class="template2emailResult" style="
                              text-decoration: initial;
                              color: #ffffff;
                              font-size: 11px;
                              line-height: 12px;
                            "></span>
                      </a>
                    </p>
                  </td>
                  <td class="template2bookappointment" style="
                        padding: 12px 16px 12px 16px;
                        text-align: right;
                        vertical-align: middle;
                      ">
                    <p id="bookingappointment" class="template2bookappointmentpara" style="
                          margin: 0;
                          font-family: Arial, sans-serif;
                          color: #ffffff;
                          font-size: 0;
                        ">
                      <a href="#" target="_blank" class="template2bookappointmentlink" id="bookappointmentlink" style="
                            text-decoration: initial;
                            color: #ffffff;
                            font-size: 0;
                          ">
                        <img
                          src="https://storage.googleapis.com/email_signatures/Answerforce_US/images/book-appointment@2x.png"
                          alt="calendar icon" class="template2calenderimage" style="
                              width: 199px;
                              height: 30px;
                              max-width: 199px;
                              max-height: 30px;
                              vertical-align: middle;
                              font-size: 0;
                              color: #ddd;
                            " />
                      </a>
                    </p>
                  </td>
                </tr>
              </tbody>
            </table>
            <img src="https://storage.googleapis.com/email_signatures/Answerforce_US/images/partners-logo-strip.png"
              alt="Partners Logo Strip" class="template2footerimage" style="
                  width: 353px;
                  height: 46px;
                  max-width: 353px;
                  max-height: 46px;
                  font-size: 0;
                  color: #ddd;
                " />
          </td>
        </tr>
      </tbody>
    </table>
    <br />
  </div>
  <button id="download-btn" style="position: relative; left: 450px; top: -140px">
    Download
  </button>
</body>

<script>
  function validationform() {
    const name = document.getElementById("username").value;
    const designation = document.getElementById("designation").value;
    const email = document.getElementById("email").value;
    const mobile = document.getElementById("mobile").value;
    const appointmentvalidation = document.getElementById("appointment").value;
    const templatename = getTemplateName();

    let count = 0;
    var regName = /^[a-zA-Z ]+$/;

    if (name == "" || name == null) {
      alert("Username is required");
    } else if (!name.match(regName)) {
      alert("Name must be alphabets");
    } else {
      count++;
      console.log(count);
    }

    if (email == "" || email == null) {
      alert("Email is required");
    } else if (
      !email.match(/^[A-Za-z\._\-0-9]*[@][A-Za-z]*[\.][a-z]{2,4}$/)
    ) {
      alert("Please provide a valid email");
    } else {
      count++;
      console.log(count);
    }

    if (designation == "") {
      alert("Designation is required");
    } else if (!designation.match(regName)) {
      alert("Designation must be alphabets");
    } else {
      count++;
      console.log(count);
    }

    if (mobile == "") {
      alert("Mobile No is required");
    } else if (mobile.length != 10) {
      alert("Your mobile number should be of 10 digits");
    } else if (isNaN(mobile)) {
      alert("Mobile Number must be numeric");
    } else if (
      mobile.charAt(0) != 9 &&
      mobile.charAt(0) != 8 &&
      mobile.charAt(0) != 7 &&
      mobile.charAt(0) != 6
    ) {
      alert("Mobile Number should start from 9,8,7,6");
    } else {
      count++;
      console.log(count);
    }

    if(appointmentvalidation==""||appointmentvalidation==null){
      alert("URL is required");
    }else{
      count++;
      console.log(count); 
    }

    if (count == 5) {
      changeTemplate(templatename);
    }
  }

  document.getElementById("Template1").style.display = "none";
  document.getElementById("Template2").style.display = "none";
  document.getElementById("download-btn").style.display = "none";

  function sendInput(templatename) {
    const name = document.getElementById("username").value;
    const designation = document.getElementById("designation").value;
    const email = document.getElementById("email").value;
    const mobile = document.getElementById("mobile").value;

    const template = document.getElementById(templatename);
    template.querySelector("#usernameResult").innerHTML = name;
    template.querySelector("#designationResult").innerHTML = designation;
    template.querySelector("#emailResult").innerHTML = email;
    template.querySelector("#mobileResult").innerHTML = mobile;

    const mobilelink = template.querySelector("#mobileLink");
    const emaillink = template.querySelector("#emailLink");
    const bookappointmentlink = template.querySelector(
      "#bookappointmentlink"
    );

    mobilelink.setAttribute("href", "tel:" + mobile);
    emaillink.setAttribute("href", "mailto:" + email);

    bookappointmentlink.setAttribute("href", appointment);

    template.style.display = "block";
    document.getElementById("download-btn").style.display = "block";

    const downloadBtn = document.getElementById("download-btn");
    
    downloadBtn.addEventListener("click", () => {
      
      const downloadContent = templatename.innerHTML;
      const fileName = `${name}.html`;
      const file = new Blob([downloadContent], {
        type: "text/html",
      });
      const url = URL.createObjectURL(file);
      const a = document.createElement("a");
      a.href = url;
      a.download = fileName;
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    });
  
  }

  function changeTemplate(value) {
    const templateDiv = document.getElementById(value);
    if (value == "Template1") {
      document.getElementById(value).style.display = "block";
      document.getElementById("Template2").style.display = "none";
    }

    if (value == "Template2") {
      document.getElementById(value).style.display = "block";
      document.getElementById("Template1").style.display = "none";
    }
    previewFile();
    sendInput(value);
  }

  function getTemplateName() {
    let templatename;
    const ele = document.getElementsByName("templateselector");

    for (i = 0; i < ele.length; i++) {
      if (ele[i].checked) templatename = ele[i].value;
    }
    console.log(templatename);
    return templatename;
  }

  function previewFile() {
    const templateName = getTemplateName();
    console.log(templateName);
    const templateNameDiv = document.getElementById(templateName);
    console.log(templateNameDiv);

    const preview = templateNameDiv.querySelector("img");
    console.log(preview);
    // const preview = document.querySelector("img");
    const file = document.querySelector("input[type=file]").files[0];
    const reader = new FileReader();

    reader.addEventListener(
      "load",
      () => {
        preview.src = reader.result;
      },
      false
    );

    if (file) {
      reader.readAsDataURL(file);
    }
  }
</script>

</html>
